# Тест-план для проекта «Система управления персоналом»

## 1. Введение (Introduction)

Этот документ определяет стратегию, объем, методы и ресурсы, необходимые для тестирования веб-приложения «Система управления персоналом». Целью тестирования является проверка соответствия приложения функциональным и нефункциональным требованиям, описанным в SRS, а также проверка корректности реализации бизнес-логики, описанной в UML-диаграммах (Use Case, Activity, Sequence).

## 2. Объект тестирования (Test Items)

**Краткое описание проекта:** «Система управления персоналом» — это веб-приложение (SPA + REST API), предназначенное для централизованного учета кадровых данных: сотрудников, отделов, должностей, а также для управления доступом через пользователей и роли.

**Компоненты проекта:**
*   **Backend:** REST API на Java Spring Boot.
*   **Frontend:** Одностраничное приложение (SPA) на React.
*   **База данных:** PostgreSQL.

**Атрибуты качества (согласно ISO 25010):**
*   **Функциональная полнота:** Приложение должно реализовывать все функции, описанные в SRS и Use Case диаграмме.
*   **Надежность:** Система должна быть доступна и корректно обрабатывать ошибки ввода.
*   **Удобство использования (Usability):** Интерфейс должен быть интуитивно понятным.
*   **Производительность:** Время отклика на действия пользователя не должно превышать 20 секунд.
*   **Безопасность:** Пароли должны храниться в хешированном виде, доступ к функциям разграничен.

## 3. Риски (Risk Issues)

1.  **Зависимость от окружения:** Нестабильная работа СУБД PostgreSQL или сервера приложений может повлиять на результаты тестирования.
2.  **Неполная реализация аутентификации:** В SRS (п. 3.1.2) указано допущение о возможном доступе ко всем API без аутентификации.
3.  **Ошибки в тестовых данных:** Некорректно подготовленные данные (например, отсутствие ролей по умолчанию) могут привести к сбоям в тестах.

## 4. Аспекты тестирования (Features to be Tested)

Тестирование было проведено на основе вариантов использования (Use Cases) и функциональных требований.

*   **Функциональное тестирование (согласно Use Case диаграмме):**
    *   **UC-1: Авторизация в системе:** Проверка сценариев входа и регистрации.
    *   **UC-2: Управление данными (CRUD):**
        *   Управление отделами (Departments)
        *   Управление сотрудниками (Employees)
        *   Управление должностями (Positions)
    *   **UC-4: Системные функции:**
        *   Управление логами (Logs)
*   **Нефункциональное тестирование:**
    *   **NF-2: Тестирование безопасности:** Проверка хеширования паролей.

## 5. Подходы к тестированию (Test Approach)

Тестирование проводилось вручную по методу "черного ящика", симулируя действия конечного пользователя через веб-интерфейс.

*   **Use Case-тестирование:** Для каждого варианта использования (UC) разработаны тестовые сценарии (Test Cases), которые следуют основному и альтернативным потокам событий.
*   **Инструментальные средства:** Веб-браузеры (Chrome/Firefox), Инструменты разработчика, Клиент для работы с БД (PostgreSQL), GitHub.

## 6. Представление результатов (Pass / Fail Criteria)

*   **Pass (Успешно):** Фактический результат полностью соответствует ожидаемому результату, описанному в тест-кейсе.
*   **Fail (Неуспешно):** Фактический результат не соответствует ожидаемому.

### Тестовые сценарии (Test Cases)

---
#### UC-1: Авторизация и Регистрация

**ID:** TC-AUTH-01 (Позитивный)  
**Назначение:** Успешная авторизация существующего пользователя.  
**Сценарий (согласно диаграмме состояний "Процесс логина"):**
1. Открыть страницу `/login`.
2. Ввести корректный логин "admin".
3. Нажать "Continue".
4. Ввести корректный пароль "admin".
5. Нажать "Continue".  
   **Ожидаемый результат:** Пользователь успешно авторизован и перенаправлен на главную страницу приложения (`/me`), где видит приветствие "Hello, admin".

---
**ID:** TC-AUTH-02 (Негативный)  
**Назначение:** Попытка авторизации с неверным паролем.  
**Сценарий:**
1. Открыть страницу `/login`.
2. Ввести корректный логин "admin".
3. Нажать "Continue".
4. Ввести некорректный пароль "password".
5. Нажать "Continue".  
   **Ожидаемый результат:** Система отображает сообщение об ошибке "Invalid username or password.". Пользователь остается на странице ввода пароля.

---
**ID:** TC-AUTH-03 (Позитивный)  
**Назначение:** Успешная регистрация нового пользователя.  
**Сценарий (согласно диаграмме состояний "Процесс регистрации"):**
1. Открыть страницу `/login`.
2. Нажать на ссылку "Sign Up".
3. На странице `/register` ввести уникальный Username (например, "newuser"), Email и пароль (не менее 8 символов).
4. Нажать "Continue".
   **Ожидаемый результат:** Пользователь успешно зарегистрирован, автоматически авторизован и перенаправлен на главную страницу (`/me`), где видит приветствие "Hello, newuser".

---
**ID:** TC-AUTH-04 (Негативный)  
**Назначение:** Попытка регистрации с уже существующим именем пользователя.
**Сценарий:**
1. Открыть страницу `/register`.
2. Ввести существующий Username "admin", любой Email и пароль.
3. Нажать "Continue".
   **Ожидаемый результат:** Система отображает сообщение об ошибке, информирующее, что имя пользователя уже занято.

---
#### UC-2: Управление Отделами (Departments)

**ID:** TC-CRUD-DEP-01 (Позитивный)  
**Назначение:** Создание нового отдела.  
**Сценарий:**
1. Авторизоваться под учетной записью "admin".
2. В левом меню нажать на "Departments".
3. Нажать кнопку "Add Department".
4. В форме ввести уникальное название отдела (например, "HR") и описание.
5. Нажать "Save".  
   **Ожидаемый результат:** Происходит редирект на страницу со списком отделов. Новый отдел "HR" появляется в списке.

---
**ID:** TC-CRUD-DEP-02 (Негативный)  
**Назначение:** Попытка создания отдела с невалидными данными (пустое имя).  
**Сценарий:**
1. Авторизоваться под "admin".
2. Перейти на страницу добавления отдела `/departments/add`.
3. Оставить поле "Name" пустым.
4. Нажать "Save".  
   **Ожидаемый результат:** Форма не отправляется, под полем "Name" появляется сообщение об ошибке валидации (браузер/бэкенд).

---
**ID:** TC-CRUD-DEP-03 (Позитивный)  
**Назначение:** Редактирование существующего отдела.  
**Сценарий:**
1. Авторизоваться под "admin".
2. В списке отделов найти созданный ранее отдел "HR" и нажать "Edit".
3. Изменить описание отдела.
4. Нажать "Save".
   **Ожидаемый результат:** Происходит редирект на список отделов. У отдела "HR" отображается новое описание.

---
**ID:** TC-CRUD-DEP-04 (Позитивный)  
**Назначение:** Удаление отдела.  
**Сценарий:**
1. Авторизоваться под "admin".
2. В списке отделов найти отдел "HR" и нажать "Delete".
   **Ожидаемый результат:** Отдел "HR" исчезает из списка.

---
#### UC-2: Управление Сотрудниками (Employees)

**ID:** TC-CRUD-EMP-01 (Позитивный)  
**Назначение:** Добавление нового сотрудника.  
**Сценарий:**
1. Создать Department/Position/User.
2. В левом меню нажать на "Employees".
3. Нажать кнопку "Add Employee".
4. Заполнить все обязательные поля: First Name, Last Name, Email, Hire Date, Salary, Department Name, Position Name, Username.
5. Нажать "Save".
   **Ожидаемый результат:** Происходит редирект на страницу со списком сотрудников. Новый сотрудник появляется в списке с корректными данными.

---
**ID:** TC-CRUD-EMP-02 (Негативный)  
**Назначение:** Попытка создания сотрудника с некорректным email.  
**Сценарий:**
1. Перейти на страницу `/employees/add`.
2. Ввести все данные, но в поле "Email" указать некорректное значение (например, "test@test").
3. Нажать "Save".
   **Ожидаемый результат:** Форма не отправляется, появляется сообщение об ошибке валидации формата email.

---
**ID:** TC-CRUD-EMP-03 (Негативный)  
**Назначение:** Попытка создания сотрудника со ссылкой на несуществующий отдел.  
**Сценарий:**
1. Перейти на страницу `/employees/add`.
2. Заполнить все поля, но в поле "Department Name" ввести имя несуществующего отдела (например, "NonExistentDept").
3. Нажать "Save".
   **Ожидаемый результат:** Появляется сообщение об ошибке, что указанный отдел не найден ("Department "NonExistentDept" not found").

---
#### UC-2: Управление Должностями (Positions)

**ID:** TC-CRUD-POS-01 (Позитивный)  
**Назначение:** Создание новой должности.  
**Сценарий:**
1. Авторизоваться под "admin".
2. В левом меню нажать на "Positions".
3. Нажать кнопку "Add Position".
4. В форме ввести Name: "Lead Engineer", Min Salary: 80000, Max Salary: 120000.
5. Нажать "Save".
   **Ожидаемый результат:** Новая должность "Lead Engineer" появляется в списке.

---
**ID:** TC-CRUD-POS-02 (Позитивный)  
**Назначение:** Редактирование должности.  
**Сценарий:**
1. Найти "Lead Engineer", нажать "Edit".
2. Изменить Description и Max Salary.
3. Нажать "Save".
   **Ожидаемый результат:** Измененные данные отображаются в списке.

---
**ID:** TC-CRUD-POS-03 (Позитивный)  
**Назначение:** Удаление должности.  
**Сценарий:**
1. Найти "Lead Engineer", нажать "Delete".
   **Ожидаемый результат:** Должность исчезает из списка.

---
#### UC-4: Управление логами

**ID:** TC-LOG-01 (Позитивный)  
**Назначение:** Генерация, проверка статуса и скачивание лог-файла.
**Сценарий:**
1. Авторизоваться под "admin".
2. В левом меню нажать "Logs".
3. В поле "Date" ввести существующую дату лога.
4. Нажать "Generate Log", скопировать ID.
5. Вставить ID, нажать "Check Status" (дождаться COMPLETED).
6. Нажать "Download Log".
   **Ожидаемый результат:** Задача по генерации лога успешно запускается и завершается. Файл лога за указанную дату успешно скачивается на компьютер.

---
**ID:** TC-LOG-02 (Негативный)  
**Назначение:** Попытка просмотра лога за дату, для которой нет файла.  
**Сценарий:**
1. Перейти в раздел "Logs".
2. Ввести дату в будущем.
3. Нажать "View Log".
   **Ожидаемый результат:** Появляется сообщение "Log not found".

---
#### NF-2: Тестирование безопасности

**ID:** TC-SEC-01 (Позитивный)  
**Назначение:** Проверка хеширования пароля при регистрации.  
**Сценарий:**
1. Открыть страницу `/register`.
2. Создать нового пользователя с простым паролем.
3. Проверить значение поля `password` для созданного пользователя в БД.
   **Ожидаемый результат:** В поле "password" хранится длинная строка, являющаяся BCrypt-хешем.

---

## 7. Выводы (Conclusion)

Успешное прохождение выполненных тестов подтверждает, что основной функционал веб-приложения «Система управления персоналом» соответствует заявленным требованиям. В частности, подтверждена корректная работа системы аутентификации, базовых CRUD-операций для ключевых сущностей (Departments, Employees, Positions), а также функционала асинхронного управления логами и соблюдение требования к хешированию паролей.